<?php
/**
 * @file
 * Code for the Luggage Blog feature.
 */

include_once 'luggage_blog.features.inc';

/**
 * Implements theme_preprocess_node()
 */
function luggage_blog_preprocess_node(&$vars) {
  // rewrite the display of the "Display author and date information" to be nicer for only
  // blog posts.
  if($vars['submitted'] && $vars['type'] == "lug_blog") {
    $vars['submitted'] = t("%datetime",
      array('%datetime' => format_date($vars['node']->created, 'news')));
  }
}

function luggage_blog_views_pre_render(&$view) {
  if ($view->name == 'blog' && $view->current_display == 'person_blog_page') {
    $view->set_title($view->build_info['substitutions']['%1']);
    drupal_add_css(drupal_get_path('module', 'luggage_blog') . '/css/luggage_blog_person.css');
  } else if ($view->name == 'blog' && $view->current_display == 'blog_author_list_attachment') {
    drupal_add_css(drupal_get_path('module', 'luggage_blog') . '/css/luggage_blog_author_list_attachment.css');
  }
}